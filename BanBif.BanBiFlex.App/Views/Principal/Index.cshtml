<!DOCTYPE html>
<html lang="en">

<head>
    <meta http-equiv="content-type" content="text/plain; charset=UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
    <title>BanBiflex | Separación de Sitios</title>

    <meta name="description" content="overview &amp; stats" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0" />

    <!-- bootstrap & fontawesome -->
    <link rel="stylesheet" href="~/Library/assets/css/bootstrap.min.css" />
    <link rel="stylesheet" href="~/Library/assets/font-awesome/4.5.0/css/font-awesome.min.css" />
    <!-- text fonts -->
    <link rel="stylesheet" href="~/Library/assets/css/fonts.googleapis.com.css" />

    <!-- ace styles -->
    <link rel="stylesheet" href="~/Library/assets/css/ace.min.css" class="ace-main-stylesheet" id="main-ace-style" />
    <link rel="stylesheet" href="~/Library/assets/css/ace-skins.min.css" />
    <script src="~/Library/assets/js/ace-extra.min.js"></script>
    <link rel="stylesheet" href="~/Library/assets/css/ace-rtl.min.css" />
    <link href="~/Library/css/bootstrap-datepicker/bootstrap-datepicker.min.css" rel="stylesheet" />
    <!-- ace settings handler -->
    @*<link href="Library/js/dataTables/dataTables.bootstrap.css" rel="stylesheet" />*@


    <link href="~/Library/css/alertifyjs/alertify.css" rel="stylesheet" />
    <link href="~/Library/css/alertifyjs/default.css" rel="stylesheet" />

    <script src="~/Library/assets/js/ace-extra.min.js"></script>
    <script src="~/Library/assets/js/jquery-2.1.4.min.js"></script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title> </title>

    <style>
        /* styles unrelated to zoom */
        * {
            border: 0;
            margin: 0;
            padding: 0;
        }

        p {
            position: absolute;
            top: 3px;
            right: 28px;
            color: #555;
            font: bold 13px/1 sans-serif;
        }

        /* these styles are for the demo, but are not required for the plugin */
        .zoom {
            display: inline-block;
            position: relative;
        }

            /* magnifying glass icon */
            .zoom:after {
                content: '';
                display: block;
                width: 33px;
                height: 33px;
                position: absolute;
                top: 0;
                right: 0;
                background: url('../../Content/ImagenesPiso/icon.png');
            }

            .zoom img {
                display: block;
            }

                .zoom img::selection {
                    background-color: transparent;
                }
    </style>

    @*<script src='http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js'></script>*@

    <script src="~/Library/js/jquery.zoom.js"></script>
    <script>
        $(document).ready(function () {
            $('#ex-1').zoom();
            $('#ex1').zoom();
            $('#ex2').zoom();
            $('#ex3').zoom();
            $('#ex4').zoom();
            $('#ex5').zoom();
            $('#ex6').zoom();
            $('#ex7').zoom();
            $('#ex8').zoom();
            $('#ex9').zoom();
            $('#ex10').zoom();
            $('#ex11').zoom();
            $('#ex12').zoom();
            $('#ex13').zoom();
            $('#ex14').zoom();
            $('#ex15').zoom();
        });
    </script>


    <!-- CUSTOM CSS -->

    <script src="~/Library/js/jquery.blockUI.js"></script>

    <style>
        .sidebar {
            width: 220px;
            float: left;
            position: static;
            padding-left: 0;
            padding-right: 0;
        }

            .sidebar + .main-content {
                margin-left: 220px;
            }

        .input-sm {
            height: 26px;
            line-height: 1.5;
        }

        select.input-sm {
            height: 26px;
            line-height: 30px;
        }

        .form-group-sm .form-control + .form-control-feedback, .input-group-sm + .form-control-feedback, .input-sm + .form-control-feedback {
            width: 10px;
            height: 30px;
            line-height: 30px;
        }

        td.details-control {
            background: url('../../Library/img/details_open.png') no-repeat center center;
            cursor: pointer;
        }

        tr.shown td.details-control {
            background: url('../../Library/img/details_close.png') no-repeat center center;
        }
    </style>
</head>

<body class="no-skin">

    <div id="navbar" class="navbar navbar-default ace-save-state" style="background: #20a6ff !important">
        <div class="navbar-container ace-save-state" id="navbar-container">
            <button type="button" class="navbar-toggle menu-toggler pull-left" id="menu-toggler" data-target="#sidebar">
                <span class="sr-only">Toggle sidebar</span>

                <span class="icon-bar"></span>

                <span class="icon-bar"></span>

                <span class="icon-bar"></span>
            </button>

            <div class="navbar-header pull-left">

                <a class="navbar-brand brand-logo" href="#">
                    <img src="~/Library/assets/images/banbif/logo_banbif_blanco.png" style="margin-left: 40px; width: 120px" alt="logo">
                </a>
            </div>

            <div class="navbar-buttons navbar-header pull-right" role="navigation">
                <ul class="nav ace-nav">
                    <li class="light-blue dropdown-modal">
                        <a ID="btnCerrarSesion" href="#" onclick="CerrarSesion()">
                            <i class="ace-icon fa fa-power-off"></i>
                            Cerrar Sesión
                        </a>

                        @*<ul class="user-menu dropdown-menu-right dropdown-menu dropdown-yellow dropdown-caret dropdown-close">
                                <li>
                                    <a ID="btnCerrarSesion" href="#" onclick="CerrarSesion()">
                                        <i class="ace-icon fa fa-power-off"></i>
                                        Cerrar Sesión
                                    </a>
                                </li>
                            </ul>*@

                    </li>
                </ul>
            </div>

        </div><!-- /.navbar-container -->
    </div>

    <div class="main-container ace-save-state" id="main-container">
        <script type="text/javascript">
            try { ace.settings.loadState('main-container') } catch (e) { }
        </script>


        <div id="sidebar" class="sidebar responsive ace-save-state">
            <script type="text/javascript">
                try { ace.settings.loadState('sidebar') } catch (e) { }
            </script>

            <ul class="nav nav-list">
                <li>
                    <a href="https://www.reinventabanbif.pe/Miespacioflex/Principal">
                        <i class="menu-icon fa  fa-check -o" style="font-size:15px;"></i>
                        Reserva de Espacio de Trabajo
                    </a>
                </li>
                <li id="liParametro">
                    <a href="https://www.reinventabanbif.pe/Miespacioflex/MisReservas">
                        <i class="menu-icon fa  fa-table -o" style="font-size:15px;"></i>
                        Mis Reservas
                    </a>
                </li>
                @*  <li>
                                <a href="/SalaReuniones">
                                    <i class="menu-icon fa  fa-check -o" style="font-size:15px;"></i>
                                    Reserva de Espacio de Trabajo
                                </a>
                            </li>
                          <li id="liParametro">
                        <a href="/Reporte/Detalle">
                            <i class="menu-icon fa  fa-table -o" style="font-size:15px;"></i>
                            Reporte Detallado
                        </a>
                    </li>*@

            </ul><!-- /.nav-list -->
        </div>


        <div id="divMainContent" class="main-content">
            <div class="main-content-inner">
                <div id="process-data-loader" class="notdisplay">
                    <img src="~/Library/img/ajax-loader.gif" alt="" />
                    <label>Cargando Información...</label>
                </div>
                <div class="page-content">
                    <div class="row">
                        <div class="col-sm-6">
                            <div class="row">
                                <div class="col-sm-12">
                                    <div class="form-group">
                                        <div class="page-header">

                                            <h5>En esta plataforma podrás reservar tu espacio de trabajo, estacionamiento y salas de reuniones de acuerdo a los lineamientos de nuestro modelo híbrido en BanBif.</h5>

                                        </div>
                                        <div class="page-content">

                                            <div class="space-3"></div>
                                            <div class="row">
                                                <div class="col-sm-3">

                                                    <h6>Tipo Reserva</h6>
                                                    <select name="tipoReserva" id="tipoReserva" required autocomplete="off">
                                                        @*<option value="0">Tipo de Rerserva</option>*@
                                                        <option value="1">Espacio de Trabajo</option>
                                                        <option value="2">Sala de Reuniones</option>
                                                    </select>
                                                </div>
                                                <div class="col-sm-3">
                                                    <h6>Fecha</h6>
                                                    <input type="date" name="date" id="date" style="height:30px" required>
                                                </div>
                                            </div>
                                            <br />
                                            <div class="row">
                                                <div class="col-sm-2">
                                                    <input type="button" id="btnDisponibilidad" class="btn btn-primary btn-xs" value="Ver Disponibilidad">
                                                </div>
                                            </div>
                                            <div class="space-4"></div>
                                            <div class="row">
                                                <div class="col-sm-6">
                                                    <div class="row" id="divReserva">

                                                    </div>
                                                    <select id="cboAsientos" style="display:none" name="cboAsientos" class="form-control form-control-3" onchange="ValorAsiento(cboAsientos.value)">
                                                    </select>
                                                    <div class="row" id="divAforoSala">

                                                    </div>
                                                    <div class="row" id="divTransporte">
                                                        <h2>¿Cómo irás a la oficina?</h2>
                                                        <div class="col-sm-6">
                                                            <input type="radio" id="Pie" name="fav_Transporte" value="Pie" onclick="checkRadio(value)">
                                                            <label for="Caminando">Caminando</label><br>
                                                            <input type="radio" id="Transporte" name="fav_Transporte" value="Transporte" onclick="checkRadio(value)">
                                                            <label for="Transporte">Transporte Público</label><br>
                                                            <input type="radio" id="Taxi" name="fav_Transporte" value="Taxi" onclick="checkRadio(value)">
                                                            <label for="Taxi">Taxi</label><br />
                                                            <input type="radio" id="Bicicleta" name="fav_Transporte" value="Bicicleta" onclick="checkRadio(value)">
                                                            <label for="Bicicleta">Bicicleta</label><br>
                                                            <input type="radio" id="Moto" name="fav_Transporte" value="Moto" onclick="checkRadio(value)">
                                                            <label for="Moto">Moto</label><br>
                                                            <input type="radio" id="Auto" name="fav_Transporte" value="Auto" onclick="checkRadio(value)">
                                                            <label for="Auto">Auto</label><br />
                                                            <div id="divPlaca">
                                                                <input id="placa" type="text" name="placa" autocomplete="off" placeholder="Placa">
                                                            </div>

                                                            <br /><br />
                                                        </div>
                                                    </div>
                                                    <div class="row" id="divBoton">
                                                        <div class="col-sm-4">
                                                            <input type='button' id='btnReservar' name="btnReservar" class='btn btn-primary btn-xs' value='Reservar Espacio'>
                                                        </div>
                                                    </div>
                                                </div>

                                                <div class="col-sm-2" id="DivImagen">
                                                    <span class='zoom' id='ex-1' style="display:none">
                                                        <img src='~/Content/ImagenesPiso/-1.jpg' width='600' height='500' alt='Daisy on the Ohoopee' />
                                                    </span>
                                                    <span class='zoom' id='ex1' style="display:none">
                                                        <img src='~/Content/ImagenesPiso/1.jpg' width='600' height='500' alt='Daisy on the Ohoopee' />
                                                    </span>
                                                    <span class='zoom' id='ex2' style="display:none">
                                                        <img src='~/Content/ImagenesPiso/2.jpg' width='600' height='500' alt='Daisy on the Ohoopee' />
                                                    </span>
                                                    <span class='zoom' id='ex3' style="display:none">
                                                        <img src='~/Content/ImagenesPiso/3.jpg' width='600' height='500' alt='Daisy on the Ohoopee' />
                                                    </span>
                                                    <span class='zoom' id='ex4' style="display:none">
                                                        <img src='~/Content/ImagenesPiso/4.jpg' width='600' height='500' alt='Daisy on the Ohoopee' />
                                                    </span>
                                                    <span class='zoom' id='ex5' style="display:none">
                                                        <img src='~/Content/ImagenesPiso/5.jpg' width='600' height='500' alt='Daisy on the Ohoopee' />
                                                    </span>
                                                    <span class='zoom' id='ex6' style="display:none">
                                                        <img src='~/Content/ImagenesPiso/6.jpg' width='600' height='500' alt='Daisy on the Ohoopee' />
                                                    </span>
                                                    <span class='zoom' id='ex7' style="display:none">
                                                        <img src='~/Content/ImagenesPiso/7.jpg' width='600' height='500' alt='Daisy on the Ohoopee' />
                                                    </span>
                                                    <span class='zoom' id='ex8' style="display:none">
                                                        <img src='~/Content/ImagenesPiso/8.jpg' width='600' height='500' alt='Daisy on the Ohoopee' />
                                                    </span>
                                                    <span class='zoom' id='ex9' style="display:none">
                                                        <img src='~/Content/ImagenesPiso/9.jpg' width='600' height='500' alt='Daisy on the Ohoopee' />
                                                    </span>
                                                    <span class='zoom' id='ex10' style="display:none">
                                                        <img src='~/Content/ImagenesPiso/10.jpg' width='600' height='500' alt='Daisy on the Ohoopee' />
                                                    </span>
                                                    <span class='zoom' id='ex11' style="display:none">
                                                        <img src='~/Content/ImagenesPiso/11.jpg' width='600' height='500' alt='Daisy on the Ohoopee' />
                                                    </span>
                                                    <span class='zoom' id='ex12' style="display:none">
                                                        <img src='~/Content/ImagenesPiso/12.jpg' width='600' height='500' alt='Daisy on the Ohoopee' />
                                                    </span>
                                                    <span class='zoom' id='ex13' style="display:none">
                                                        <img src='~/Content/ImagenesPiso/13.jpg' width='600' height='500' alt='Daisy on the Ohoopee' />
                                                    </span>
                                                    <span class='zoom' id='ex14' style="display:none">
                                                        <img src='~/Content/ImagenesPiso/14.jpg' width='600' height='500' alt='Daisy on the Ohoopee' />
                                                    </span>
                                                    <span class='zoom' id='ex15' style="display:none">
                                                        <img src='~/Content/ImagenesPiso/15.jpg' width='600' height='500' alt='Daisy on the Ohoopee' />
                                                    </span>

                                                </div>

                                            </div>


                                        </div>


                                    </div>

                                </div>
                            </div>
                        </div>

                    </div>

                </div><!-- /.page-content -->
            </div>
        </div><!-- /.main-content -->

    </div><!-- /.main-container -->
    <!-- basic scripts -->
    <!--[if !IE]> -->
    <!--[if IE]>
    <script src="assets/js/jquery-1.11.3.min.js"></script>
    <![endif]-->
    <script type="text/javascript">
        if ('ontouchstart' in document.documentElement) document.write("<script src='~/Library/assets/js/jquery.mobile.custom.min.js'>" + "<" + "/script>");
    </script>
    <script src="~/Library/assets/js/bootstrap.min.js"></script>

    <script src="~/Library/js/bootstrap.min.js"></script>
    <script src="~/Library/js/sweetalert2.min.js"></script>
    <script type="text/javascript">

        function Cargando() {
            $('#process-data-loader').show();
        }
    </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/sweetalert/2.1.0/sweetalert.min.js"></script>
    <link href="http://tristanedwards.me/u/SweetAlert/lib/sweet-alert.css" rel="stylesheet" />
    <script src="~/Library/js/Validaciones.js"></script>


</body>
</html>

<script>

    //window.onload = function () {
    //    var fecha = new Date(); //Fecha actual
    //    var mes = fecha.getMonth() + 1; //obteniendo mes
    //    var dia = fecha.getDate(); //obteniendo dia
    //    var ano = fecha.getFullYear(); //obteniendo año
    //    if (dia < 10)
    //        dia = '0' + dia; //agrega cero si el menor de 10
    //    if (mes < 10)
    //        mes = '0' + mes //agrega cero si el menor de 10
    //    document.getElementById('date').value = ano + "-" + mes + "-" + dia;
    //}

    var FechaMin;
    var FechaMax;
    var IdSitio = 0;
    var flag = 1;
    var formaTransporte;
    var flagAsiento = 0;

    $(document).ready(function () {
        sessionStorage.setItem("APP", "@ViewBag.App");

        if (sessionStorage.getItem("USERID") < 1 || sessionStorage.getItem("USERID") == null) {
            window.location.href = sessionStorage.APP + "/Home";
        }
        $('#divTransporte').hide();
        $('#divBoton').hide();
        $('#divPlaca').hide();

        //var date = new Date();
        //const formatDate = (date) => {
        //    let formatted_date = date.getFullYear() + "-" + (date.getMonth() + 1) + "-" + date.getDate()
        //    return formatted_date;
        //}
        //$('#date').val() = formatDate(date);
        //console.log(formatDate(date));

        if (flag == 1) {
            Inicio();
        }


        
//        sessionStorage.getItem("FLAGGRUPO0");

        $("#btnDisponibilidad").on("click", function () {
            Cargando();

            if ($("#tipoReserva").val() == "1") {
                $('#DivImagen').show();
                var oBEValidaSitioRequest = {};
                oBEValidaSitioRequest.Piso = sessionStorage.getItem("PISO");
                oBEValidaSitioRequest.Sitio = sessionStorage.getItem("SITIO");
                oBEValidaSitioRequest.Fecha = $('#date').val();
                oBEValidaSitioRequest.UserId = sessionStorage.getItem("USERID");
                $.ajax({
                    url: sessionStorage.APP + '/Principal/ValidarSitios',
                    type: "POST",
                    dataType: "json",
                    contentType: "application/json; charset=utf-8",
                    processData: true,
                    data: JSON.stringify(oBEValidaSitioRequest),
                    success: function (responseValidarSitios) {
                        console.log(responseValidarSitios);
                        if (responseValidarSitios.data[0].Id > 0) {
                            if (responseValidarSitios.data[0].Mensaje == 'Sitio Libre') {
                                var Reserva = '<h4><b>HOLA,</b><BR>' + sessionStorage.getItem("NOMBRES") +
                                    '<BR><BR> Puedes Reservar tu Sitio N° ' + sessionStorage.getItem("SITIO") +
                                    '<br> ubicado en el Piso ' + sessionStorage.getItem("PISO") + ' </h4> ';
                                IdSitio = responseValidarSitios.data[0].Id;
                                flagAsiento = 0;
                                $('#divTransporte').show();
                                $('#divBoton').show();
                                $('#cboAsientos').hide();
                            }

                            if (responseValidarSitios.data[0].Mensaje == 'Sitio Ocupado') {
                                var Reserva = '<h4><b>HOLA,</b><BR>' + sessionStorage.getItem("NOMBRES") +
                                    '<BR><BR><b> Tu Sitio N° ' + sessionStorage.getItem("SITIO") +
                                    ' ubicado en el Piso ' + sessionStorage.getItem("PISO") + ' ya está reservado para el día seleccionado, ' +
                                    'selecciona otra fecha para reservar</b></h4 > ';
                                $('#divTransporte').hide();
                                $('#divBoton').hide();
                            }

                            if (responseValidarSitios.data[0].Mensaje == 'Ya tiene una reserva para la fecha seleccionada') {
                                var Reserva = '<h4><h2><i class="fa fa-edit text-success"></i> HOLA 👋</h2><BR>' + sessionStorage.getItem("NOMBRES") +
                                    '<BR><BR><b> Ya tienes un espacio reservado para la fecha correspondiente el sitio reservado es el N° ' + responseValidarSitios.data[0].Nro +
                                    ' ubicado en el Piso ' + sessionStorage.getItem("PISO") + ', ' +
                                    'selecciona otra fecha para reservar</b></h4 > ';
                                $('#divTransporte').hide();
                                $('#divBoton').hide();
                                $('#cboAsientos').hide();
                            }
                            if (responseValidarSitios.data[0].Mensaje == 'Sitio Bloqueado') {
                                $('#divTransporte').show();
                                $('#divBoton').show();
                                document.getElementById("cboAsientos").style.display = "block";
                                var Reserva = '<h4><b>HOLA,</b><BR>' + sessionStorage.getItem("NOMBRES") +
                                    '<BR><BR><b> Tu Sitio N° ' + sessionStorage.getItem("SITIO") +
                                    ' ubicado en el Piso ' + sessionStorage.getItem("PISO") + ' está bloqueado para el día seleccionado, ' +
                                    'puedes seleccionar un sitio de tu piso no asignado a ningún compañero, solo recuerda llevar una laptop para que puedas trabajar. </b></h4 > ';
                                flagAsiento = 1;

                                var html = '<option value="0"> -- Seleccionar Sitio -- </option>';
                                $.each(responseValidarSitios.data, function (index, item) {
                                    html += '<option value="' + item.Id + '">Puesto ' + item.Nro + '</option>';
                                    //   Reserva += "<input type='radio' id='" + item.Nro + "' onclick='ValorAsiento(value)' name='fav_bloqueado' value='" + item.Id + "'> <label for='" + item.Nro + "'>Asiento " + item.Nro + "</label><br>";
                                });

                                $('#cboAsientos').empty().append(html);
                            }

                            if (responseValidarSitios.data[0].Mensaje == 'Sin Sitio') {
                                $('#divTransporte').show();
                                $('#divBoton').show();
                                document.getElementById("cboAsientos").style.display = "block"; 2
                                var Reserva = '<h4><b>HOLA,</b><BR>' + sessionStorage.getItem("NOMBRES") +
                                    '<BR><BR><b> Reserva tu sitio habitual en el piso ' + sessionStorage.getItem("PISO") + '. Si no aparece en la lista, es porque se encuentra bloqueado, en ese caso, puedes seleccionar otra fecha para asistir, separar una sala, o escoger otro sitio que esté disponible para ese día. </b></h4 > ';
                                flagAsiento = 1;

                                var html = '<option value="0"> -- Seleccionar Sitio -- </option>';
                                $.each(responseValidarSitios.data, function (index, item) {
                                    html += '<option value="' + item.Id + '">Puesto ' + item.Nro + '</option>';
                                    //   Reserva += "<input type='radio' id='" + item.Nro + "' onclick='ValorAsiento(value)' name='fav_bloqueado' value='" + item.Id + "'> <label for='" + item.Nro + "'>Asiento " + item.Nro + "</label><br>";
                                });

                                $('#cboAsientos').empty().append(html);
                            }

                            $("#divReserva").html(Reserva);
                            $('#process-data-loader').hide();

                        } else {
                            //alert(responseValidarSitios.data[0].Mensaje);

                            if (responseValidarSitios.data[0].Mensaje == 'No puede reservar, ya tiene un máximo de 3 reservas activas') {
                                var Reserva = '<h4><b>HOLA,</b><BR>' + sessionStorage.getItem("NOMBRES") +
                                    '<BR><BR><b> No puedes reservar porque ya tienes 3 reservas activas </b></h4 > ';


                                $('#process-data-loader').hide();

                                $('#divTransporte').hide();
                                $('#divBoton').hide();
                                $('#cboAsientos').hide();
                                $("#divReserva").html(Reserva);
                                $("#divAforoSala").hide();
                            }
                        }

                    },
                    failure: function (msg) {
                        console.log(msg);
                    },
                    error: function (xhr, status, error) {
                        console.log(error);
                    },
                    complete: function () {
                    }
                });
            }
            else {
                $('#divTransporte').hide();
                $('#divBoton').hide();
                $('#divPlaca').hide();
                $('#divReserva').hide();
                $('#DivImagen').hide();
                var oBEValidaSitioRequest = {};
                oBEValidaSitioRequest.Piso = sessionStorage.getItem("PISO");
                oBEValidaSitioRequest.Sitio = sessionStorage.getItem("SITIO");
                oBEValidaSitioRequest.Fecha = $('#date').val();
                $.ajax({
                    url: sessionStorage.APP + '/Principal/ValidarSalas',
                    type: "POST",
                    dataType: "json",
                    contentType: "application/json; charset=utf-8",
                    processData: true,
                    data: JSON.stringify(oBEValidaSitioRequest),
                    success: function (responseValidarSitios) {
                        console.log(responseValidarSitios);

                        document.getElementById("cboAsientos").style.display = "block";

                        $("#cboAsientos").html('');
                        var html = '<option value="0"> -- SELECCIONAR SALA DE REUNIONES -- </option>';
                        $.each(responseValidarSitios.data, function (index, item) {
                            html += '<option value="' + item.Id + '">Puesto ' + item.Mensaje + '</option>';
                            console.log(item.Mensaje);
                            //   Reserva += "<input type='radio' id='" + item.Nro + "' onclick='ValorAsiento(value)' name='fav_bloqueado' value='" + item.Id + "'> <label for='" + item.Nro + "'>Asiento " + item.Nro + "</label><br>";
                        });
                        $('#cboAsientos').empty().append(html);

                        var Reserva = '<h4><b>HOLA,</b><BR>' + sessionStorage.getItem("NOMBRES");

                            $("#divReserva").html(Reserva);
                            $('#process-data-loader').hide();
                        $('#divReserva').show();
                        $('#divTransporte').show();
                        $('#divBoton').show();
                        $('#cboAsientos').show();
                        $("#divAforoSala").hide();

                    },
                    failure: function (msg) {
                        console.log(msg);
                    },
                    error: function (xhr, status, error) {
                        console.log(error);
                    },
                    complete: function () {
                    }
                });
            }

        });


        $("#btnReservar").on("click", function () {
            $.blockUI({ message: '<h1>Reservando...</h1>' });
            $('#divBoton').hide();
            if (ValidarFormularioCompleto() == false) {
                $.unblockUI();
                $('#divBoton').show();
                swal("Valide Fecha!", "La fecha ingresada no está permitida, valide por favor", "error");
                return false;
            }
            else {

                if ((formaTransporte == "Moto" || formaTransporte == "Auto") && $('#placa').val()=='')
                    {
                    $.unblockUI();
                    $('#divBoton').show();
                    swal("Valide Placa!", "El Nro de Placa es Obligatorio, por la forma seleccionada de asistir al Banco", "error");
                    return false;
                }
                if (IdSitio == "0") {
                    $.unblockUI();
                    $('#divBoton').show();
                    swal("Seleccione un puesto de trabajo");
                    return false;
                }
                //alert(listaUsuarios.length);
                if (listaUsuarios.length > 0) {// SALA DE REUNIONES
                    var oBERequest = {};
                    oBERequest.Fecha = $('#date').val();
                    oBERequest.IdSala = IdSitio;
                    oBERequest.Hora = $("#horainicio").val();
                    $.ajax({
                        url: sessionStorage.APP + '/Principal/ValidarHoraSala',
                        type: "POST",
                        dataType: "json",
                        contentType: "application/json; charset=utf-8",
                        processData: true,
                        data: JSON.stringify(oBERequest),
                        success: function (response) {
                            console.log(response.data);
                            if (response.data != "0") {
                                if (response.result) {
                                    swal("Sala Ocupada!", "Cambie la hora de la reserva", "error");
                                    $('#divBoton').show();
                                }
                            }
                            else {
                                Grabar();
                            }

                        },
                        failure: function (msg) {
                            console.log(msg);

                        },
                        error: function (xhr, status, error) {
                            console.log(error);

                        },
                        complete: function () {
                            $.unblockUI();

                        }

                    });

                }
                else { // SITIO
                    Grabar();
                }
            }

        });
    });

    function consuiltardispo() {

       
        $('#divTransporte').hide();
        $('#divBoton').hide();
        $('#divPlaca').hide();
        $('#divReserva').hide();
        $('#DivImagen').hide();
        var oBEValidaSitioRequest = {};
        oBEValidaSitioRequest.Piso = sessionStorage.getItem("PISO");
        oBEValidaSitioRequest.Sitio = sessionStorage.getItem("SITIO");
        oBEValidaSitioRequest.Fecha = $('#date').val();
        console.log(oBEValidaSitioRequest.Fecha);
        //$('#date').val() = formatDate(date);
        //oBEValidaSitioRequest.Fecha = formatDate(date);
        
        $.ajax({
            url: sessionStorage.APP + '/Principal/ValidarSalas',
            type: "POST",
            dataType: "json",
            contentType: "application/json; charset=utf-8",
            processData: true,
            data: JSON.stringify(oBEValidaSitioRequest),
            success: function (responseValidarSitios) {
                console.log(responseValidarSitios);

                document.getElementById("cboAsientos").style.display = "block";

                $("#cboAsientos").html('');
                var html = '<option value="0"> -- SELECCIONAR SALA DE REUNIONES -- </option>';
                $.each(responseValidarSitios.data, function (index, item) {
                    html += '<option value="' + item.Id + '">Puesto ' + item.Mensaje + '</option>';
                    console.log(item.Mensaje);
                    //   Reserva += "<input type='radio' id='" + item.Nro + "' onclick='ValorAsiento(value)' name='fav_bloqueado' value='" + item.Id + "'> <label for='" + item.Nro + "'>Asiento " + item.Nro + "</label><br>";
                });
                $('#cboAsientos').empty().append(html);

                var Reserva = '<h4><b>HOLA,</b><BR>' + sessionStorage.getItem("NOMBRES");

                $("#divReserva").html(Reserva);
                $('#process-data-loader').hide();
                $('#divReserva').show();
                $('#divTransporte').show();
                $('#divBoton').show();
                $('#cboAsientos').show();
                $("#divAforoSala").hide();

            },
            failure: function (msg) {
                console.log(msg);
            },
            error: function (xhr, status, error) {
                console.log(error);
            },
            complete: function () {
            }
        });

    }

    function Inicio() {
        console.log(sessionStorage.getItem("FLAGGRUPO0"))
        var g0 = sessionStorage.getItem("FLAGGRUPO0");

        if (g0 == 1) {
            $("#tipoReserva option[value='1']").remove();
            $("#tipoReserva").val("2");            
            //consuiltardispo();
            
        } else {
            $("#tipoReserva").val("1");
        }



        
        $("#divAforoSala").hide();
        $('#cboAsientos').hide();
        listaUsuarios = [];
        Cargando();
        var oBEFechasRequest = {};
        oBEFechasRequest.nroDocumento = "";
        $.ajax({
            url: sessionStorage.APP + '/Principal/ValidarFechas',
            type: "POST",
            dataType: "json",
            contentType: "application/json; charset=utf-8",
            processData: true,
            data: JSON.stringify(oBEFechasRequest),
            success: function (responseFechas) {

                if (responseFechas.data.FechaMin != "") {
                    var dateControl = document.querySelector('input[type="date"]');
                    dateControl.value = responseFechas.data.FechaMin;
                    dateControl.min = responseFechas.data.FechaMin;
                    dateControl.max = responseFechas.data.FechaMax;
                    FechaMin = responseFechas.data.FechaMin;
                    FechaMax = responseFechas.data.FechaMax;
                    //$('#ex1').show();

                    if (g0 == 1) {
                        
                        $("#tipoReserva").val("2");                        

                    } else {
                        $("#tipoReserva").val("1");

                    }

                    if ($("#tipoReserva").val() == "1") {
                        $('#DivImagen').show();
                        var oBEValidaSitioRequest = {};
                        oBEValidaSitioRequest.Piso = sessionStorage.getItem("PISO");
                        oBEValidaSitioRequest.Sitio = sessionStorage.getItem("SITIO");
                        oBEValidaSitioRequest.Fecha = $('#date').val();
                        oBEValidaSitioRequest.UserId = sessionStorage.getItem("USERID");
                        $.ajax({
                            url: sessionStorage.APP + '/Principal/ValidarSitios',
                            type: "POST",
                            dataType: "json",
                            contentType: "application/json; charset=utf-8",
                            processData: true,
                            data: JSON.stringify(oBEValidaSitioRequest),
                            success: function (responseValidarSitios) {
                                console.log(responseValidarSitios);
                                if (responseValidarSitios.data[0].Id > 0) {
                                    if (responseValidarSitios.data[0].Mensaje == 'Sitio Libre') {
                                        var Reserva = '<h4><b>HOLA,</b><BR>' + sessionStorage.getItem("NOMBRES") +
                                            '<BR><BR> Puedes Reservar tu Sitio N° ' + sessionStorage.getItem("SITIO") +
                                            '<br> ubicado en el Piso ' + sessionStorage.getItem("PISO") + ' </h4> ';
                                        IdSitio = responseValidarSitios.data[0].Id;
                                        flagAsiento = 0;
                                        $('#divTransporte').show();
                                        $('#divBoton').show();
                                        $('#cboAsientos').hide();
                                    }

                                    if (responseValidarSitios.data[0].Mensaje == 'Sitio Ocupado') {
                                        var Reserva = '<h4><b>HOLA,</b><BR>' + sessionStorage.getItem("NOMBRES") +
                                            '<BR><BR><b> Tu Sitio N° ' + sessionStorage.getItem("SITIO") +
                                            ' ubicado en el Piso ' + sessionStorage.getItem("PISO") + ' ya está reservado para el día seleccionado, ' +
                                            'selecciona otra fecha para reservar</b></h4 > ';
                                        $('#divTransporte').hide();
                                        $('#divBoton').hide();
                                    }

                                    if (responseValidarSitios.data[0].Mensaje == 'Ya tiene una reserva para la fecha seleccionada') {
                                        var Reserva = '<h4><h2><i class="fa fa-edit text-success"></i> HOLA 👋</h2><BR>' + sessionStorage.getItem("NOMBRES") +
                                            '<BR><BR><b> Ya tienes un espacio reservado para la fecha correspondiente el sitio reservado es el N° ' + responseValidarSitios.data[0].Nro +
                                            ' ubicado en el Piso ' + sessionStorage.getItem("PISO") + ', ' +
                                            'selecciona otra fecha para reservar</b></h4 > ';
                                        $('#divTransporte').hide();
                                        $('#divBoton').hide();
                                        $('#cboAsientos').hide();
                                    }
                                    if (responseValidarSitios.data[0].Mensaje == 'Sitio Bloqueado') {
                                        $('#divTransporte').show();
                                        $('#divBoton').show();
                                        document.getElementById("cboAsientos").style.display = "block";
                                        var Reserva = '<h4><b>HOLA,</b><BR>' + sessionStorage.getItem("NOMBRES") +
                                            '<BR><BR><b> Tu Sitio N° ' + sessionStorage.getItem("SITIO") +
                                            ' ubicado en el Piso ' + sessionStorage.getItem("PISO") + ' está bloqueado para el día seleccionado, ' +
                                            'puedes seleccionar un sitio de tu piso no asignado a ningún compañero, solo recuerda llevar una laptop para que puedas trabajar. </b></h4 > ';
                                        flagAsiento = 1;

                                        var html = '<option value="0"> -- Seleccionar Sitio -- </option>';
                                        $.each(responseValidarSitios.data, function (index, item) {
                                            html += '<option value="' + item.Id + '">Puesto ' + item.Nro + '</option>';
                                            //   Reserva += "<input type='radio' id='" + item.Nro + "' onclick='ValorAsiento(value)' name='fav_bloqueado' value='" + item.Id + "'> <label for='" + item.Nro + "'>Asiento " + item.Nro + "</label><br>";
                                        });

                                        $('#cboAsientos').empty().append(html);
                                    }

                                    if (responseValidarSitios.data[0].Mensaje == 'Sin Sitio') {
                                        $('#divTransporte').show();
                                        $('#divBoton').show();
                                        document.getElementById("cboAsientos").style.display = "block"; 2
                                        var Reserva = '<h4><b>HOLA,</b><BR>' + sessionStorage.getItem("NOMBRES") +
                                            '<BR><BR><b> Reserva tu sitio habitual en el piso ' + sessionStorage.getItem("PISO") + '. Si no aparece en la lista, es porque se encuentra bloqueado, en ese caso, puedes seleccionar otra fecha para asistir, separar una sala, o escoger otro sitio que esté disponible para ese día. </b></h4 > ';
                                        flagAsiento = 1;

                                        var html = '<option value="0"> -- Seleccionar Sitio -- </option>';
                                        $.each(responseValidarSitios.data, function (index, item) {
                                            html += '<option value="' + item.Id + '">Puesto ' + item.Nro + '</option>';
                                            //   Reserva += "<input type='radio' id='" + item.Nro + "' onclick='ValorAsiento(value)' name='fav_bloqueado' value='" + item.Id + "'> <label for='" + item.Nro + "'>Asiento " + item.Nro + "</label><br>";
                                        });

                                        $('#cboAsientos').empty().append(html);
                                    }

                                    $("#divReserva").html(Reserva);
                                    $('#process-data-loader').hide();

                                } else {
                                    //alert(responseValidarSitios.data[0].Mensaje);

                                    if (responseValidarSitios.data[0].Mensaje == 'No puede reservar, ya tiene un máximo de 3 reservas activas') {
                                        var Reserva = '<h4><b>HOLA,</b><BR>' + sessionStorage.getItem("NOMBRES") +
                                            '<BR><BR><b> No puedes reservar porque ya tienes 3 reservas activas </b></h4 > ';


                                        $('#process-data-loader').hide();

                                        $('#divTransporte').hide();
                                        $('#divBoton').hide();
                                        $('#cboAsientos').hide();
                                        $("#divReserva").html(Reserva);
                                        $("#divAforoSala").hide();
                                    }
                                }

                            },
                            failure: function (msg) {
                                console.log(msg);
                            },
                            error: function (xhr, status, error) {
                                console.log(error);
                            },
                            complete: function () {
                            }
                        });
                    }
                    else {
                        $('#divTransporte').hide();
                        $('#divBoton').hide();
                        $('#divPlaca').hide();
                        $('#divReserva').hide();
                        $('#DivImagen').hide();
                        var oBEValidaSitioRequest = {};
                        oBEValidaSitioRequest.Piso = sessionStorage.getItem("PISO");
                        oBEValidaSitioRequest.Sitio = sessionStorage.getItem("SITIO");
                        oBEValidaSitioRequest.Fecha = $('#date').val();
                        $.ajax({
                            url: sessionStorage.APP + '/Principal/ValidarSalas',
                            type: "POST",
                            dataType: "json",
                            contentType: "application/json; charset=utf-8",
                            processData: true,
                            data: JSON.stringify(oBEValidaSitioRequest),
                            success: function (responseValidarSitios) {
                                console.log(responseValidarSitios);

                                document.getElementById("cboAsientos").style.display = "block";

                                $("#cboAsientos").html('');
                                var html = '<option value="0"> -- SELECCIONAR SALA DE REUNIONES -- </option>';
                                $.each(responseValidarSitios.data, function (index, item) {
                                    html += '<option value="' + item.Id + '">Puesto ' + item.Mensaje + '</option>';
                                    console.log(item.Mensaje);
                                    //   Reserva += "<input type='radio' id='" + item.Nro + "' onclick='ValorAsiento(value)' name='fav_bloqueado' value='" + item.Id + "'> <label for='" + item.Nro + "'>Asiento " + item.Nro + "</label><br>";
                                });
                                $('#cboAsientos').empty().append(html);

                                var Reserva = '<h4><b>HOLA,</b><BR>' + sessionStorage.getItem("NOMBRES");

                                $("#divReserva").html(Reserva);
                                $('#process-data-loader').hide();
                                $('#divReserva').show();
                                $('#divTransporte').show();
                                $('#divBoton').show();
                                $('#cboAsientos').show();
                                $("#divAforoSala").hide();

                            },
                            failure: function (msg) {
                                console.log(msg);
                            },
                            error: function (xhr, status, error) {
                                console.log(error);
                            },
                            complete: function () {
                            }
                        });
                    }
                    //var oBEValidaSitioRequest = {};
                    //oBEValidaSitioRequest.Piso = sessionStorage.getItem("PISO");
                    //oBEValidaSitioRequest.Sitio = sessionStorage.getItem("SITIO");
                    //oBEValidaSitioRequest.UserId = sessionStorage.getItem("USERID");
                    //oBEValidaSitioRequest.Fecha = FechaMin;
                    //$.ajax({
                    //    url: sessionStorage.APP + '/Principal/ValidarSitios',
                    //    type: "POST",
                    //    dataType: "json",
                    //    contentType: "application/json; charset=utf-8",
                    //    processData: true,
                    //    data: JSON.stringify(oBEValidaSitioRequest),
                    //    success: function (responseValidarSitios) {
                    //        console.log(responseValidarSitios);
                    //        if (responseValidarSitios.data[0].Id > 0) {
                    //            if (responseValidarSitios.data[0].Mensaje == 'Sitio Libre') {
                    //                var Reserva = '<h4><b>HOLA,</b><BR>' + sessionStorage.getItem("NOMBRES") +
                    //                    '<BR><BR> Puedes Reservar tu Sitio N° ' + sessionStorage.getItem("SITIO") +
                    //                    '<br> ubicado en el Piso ' + sessionStorage.getItem("PISO") + ' </h4> ';
                    //                IdSitio = responseValidarSitios.data[0].Id;
                    //                flagAsiento = 0;
                    //                $('#divTransporte').show();
                    //                $('#divBoton').show();

                    //            }

                    //            if (responseValidarSitios.data[0].Mensaje == 'Sitio Ocupado') {
                    //                var Reserva = '<h4><b>HOLA,</b><BR>' + sessionStorage.getItem("NOMBRES") +
                    //                    '<BR><BR><b> Tu Sitio N° ' + sessionStorage.getItem("SITIO") +
                    //                    ' ubicado en el Piso ' + sessionStorage.getItem("PISO") + ' ya está reservado para el día seleccionado, ' +
                    //                    'selecciona otra fecha para reservar</b></h4 > ';
                    //                $('#divTransporte').hide();
                    //                $('#divBoton').hide();
                    //                $('#cboAsientos').hide();
                    //            }

                    //            if (responseValidarSitios.data[0].Mensaje == 'Ya tiene una reserva para la fecha seleccionada') {
                    //                var Reserva = '<h4><b>HOLA,</b><BR>' + sessionStorage.getItem("NOMBRES") +
                    //                    '<BR><BR><b> Ya tienes un espacio reservado para la fecha correspondiente el sitio reservado es el N° ' + responseValidarSitios.data[0].Nro +
                    //                    ' ubicado en el Piso ' + sessionStorage.getItem("PISO") + ', ' +
                    //                    'selecciona otra fecha para reservar</b></h4 > ';
                    //                $('#divTransporte').hide();
                    //                $('#divBoton').hide();
                    //                $('#cboAsientos').hide();

                    //            }
                    //            if (responseValidarSitios.data[0].Mensaje == 'Sitio Bloqueado') {
                    //                $('#divTransporte').show();
                    //                $('#divBoton').show();
                    //                document.getElementById("cboAsientos").style.display = "block"; 2
                    //                var Reserva = '<h4><b>HOLA,</b><BR>' + sessionStorage.getItem("NOMBRES") +
                    //                    '<BR><BR><b> Tu Sitio N° ' + sessionStorage.getItem("SITIO") +
                    //                    ' ubicado en el Piso ' + sessionStorage.getItem("PISO") + ' está bloqueado para el día seleccionado, ' +
                    //                    'puedes seleccionar un sitio de tu piso no asignado a ningún compañero, solo recuerda llevar una laptop para que puedas trabajar. </b></h4 > ';
                    //                flagAsiento = 1;

                    //                var html = '<option value="0"> -- Seleccionar Sitio -- </option>';
                    //                $.each(responseValidarSitios.data, function (index, item) {
                    //                    html += '<option value="' + item.Id + '">Puesto ' + item.Nro + '</option>';
                    //                    //   Reserva += "<input type='radio' id='" + item.Nro + "' onclick='ValorAsiento(value)' name='fav_bloqueado' value='" + item.Id + "'> <label for='" + item.Nro + "'>Asiento " + item.Nro + "</label><br>";
                    //                });

                    //                $('#cboAsientos').empty().append(html);
                    //            }

                    //            if (responseValidarSitios.data[0].Mensaje == 'Sin Sitio') {
                    //                $('#divTransporte').show();
                    //                $('#divBoton').show();
                    //                document.getElementById("cboAsientos").style.display = "block"; 2
                    //                var Reserva = '<h4><b>HOLA,</b><BR>' + sessionStorage.getItem("NOMBRES") +
                    //                    '<BR><BR><b> Reserva tu sitio habitual en el piso ' + sessionStorage.getItem("PISO") + '. Si no aparece en la lista, es porque se encuentra bloqueado, en ese caso, puedes seleccionar otra fecha para asistir, separar una sala, o escoger otro sitio que esté disponible para ese día. </b></h4 > ';
                    //                flagAsiento = 1;

                    //                var html = '<option value="0"> -- Seleccionar Sitio -- </option>';
                    //                $.each(responseValidarSitios.data, function (index, item) {
                    //                    html += '<option value="' + item.Id + '">Puesto ' + item.Nro + '</option>';
                    //                    //   Reserva += "<input type='radio' id='" + item.Nro + "' onclick='ValorAsiento(value)' name='fav_bloqueado' value='" + item.Id + "'> <label for='" + item.Nro + "'>Asiento " + item.Nro + "</label><br>";
                    //                });

                    //                $('#cboAsientos').empty().append(html);
                    //            }

                    //            $("#divReserva").html(Reserva);
                    //            switch (sessionStorage.getItem("PISO")) {
                    //                case "-1":
                    //                    alert(-1);
                    //                    $('#ex-1').show();
                    //                    break;
                    //                case "1":

                    //                    $('#ex1').show();
                    //                    break;
                    //                case "2":
                    //                    $('#ex2').show();
                    //                    break;
                    //                case "3":
                    //                    $('#ex3').show();
                    //                    break;
                    //                case "4":
                    //                    $('#ex4').show();
                    //                    break;
                    //                case "5":
                    //                    $('#ex5').show();
                    //                    break;
                    //                case "6":
                    //                    $('#ex6').show();
                    //                    break;
                    //                case "7":
                    //                    $('#ex7').show();
                    //                    break;
                    //                case "8":
                    //                    $('#ex8').show();
                    //                    break;
                    //                case "9":
                    //                    $('#ex9').show();
                    //                    break;
                    //                case "10":
                    //                    $('#ex10').show();
                    //                    break;
                    //                case "11":
                    //                    $('#ex11').show();
                    //                    break;
                    //                case "12":
                    //                    $('#ex12').show();
                    //                    break;
                    //                case "13":
                    //                    $('#ex13').show();
                    //                    break;
                    //                case "14":
                    //                    $('#ex14').show();
                    //                    break;
                    //                case "15":
                    //                    $('#ex15').show();
                    //                    break;
                    //            }

                    //        } else {
                    //            //alert(responseValidarSitios.data[0].Mensaje);
                    //            if (responseValidarSitios.data[0].Mensaje == 'No puede reservar, ya tiene un máximo de 3 reservas activas') {
                    //                var Reserva = '<h4><b>HOLA,</b><BR>' + sessionStorage.getItem("NOMBRES") +
                    //                    '<BR><BR><b> No puedes reservar porque ya tienes 3 reservas activas </b></h4 > ';
                    //                $('#divTransporte').hide();
                    //                $('#divBoton').hide();
                    //                $("#divReserva").html(Reserva);
                    //            }
                    //        }

                    //        $('#process-data-loader').hide();

                    //    },
                    //    failure: function (msg) {
                    //        console.log(msg);
                    //    },
                    //    error: function (xhr, status, error) {
                    //        console.log(error);
                    //    },
                    //    complete: function () {
                    //    }
                    //});
                } else {
                    swal("Su sesión ha terminado, inicie sesión nuevamente");
                    window.location.href = sessionStorage.APP;
                }

            },
            failure: function (msg) {
                console.log(msg);
            },
            error: function (xhr, status, error) {
                console.log(error);
            },
            complete: function () {
            }
        });


    }

    function Grabar() {
        var oBERequest = {};
        oBERequest.Fecha = $('#date').val();
        oBERequest.EspacioTrabajoId = IdSitio;
        oBERequest.Comentario = formaTransporte;
        oBERequest.Placa = $('#placa').val();
        oBERequest.UsuarioId = sessionStorage.getItem("USERID");
        oBERequest.HoraInicial = $("#horainicio").val();
        oBERequest.HoraFinal = $("#horafinal").val();
        $.ajax({
            url: sessionStorage.APP + '/Principal/RegistrarReserva',
            type: "POST",
            dataType: "json",
            contentType: "application/json; charset=utf-8",
            processData: true,
            data: JSON.stringify(oBERequest),
            success: function (response) {
                if (response.data != "-2") {
                    if (response.result) {


						 listaUsuarios.forEach(function (elemento, indice, array) {
                            var oBERequest2 = {};
                            oBERequest2.Fecha = $('#date').val();
                            oBERequest2.EspacioTrabajoId = IdSitio;
                            oBERequest2.Comentario = "";
                            oBERequest2.Placa = "";
                            oBERequest2.UsuarioId = elemento;
                            oBERequest2.HoraInicial = $("#horainicio").val();
                            oBERequest2.HoraFinal = $("#horafinal").val();

                            $.ajax({
                                url: sessionStorage.APP + '/Principal/RegistrarReserva',
                                type: "POST",
                                dataType: "json",
                                contentType: "application/json; charset=utf-8",
                                processData: true,
                                data: JSON.stringify(oBERequest2),
                                success: function (response) {


                                },
                                failure: function (msg) {
                                    console.log(msg);
                                    //  $.unblockUI();
                                },
                                error: function (xhr, status, error) {
                                    console.log(error);
                                    //  $.unblockUI();
                                },
                                complete: function () {
                                    $.unblockUI();
                                    //$("#prueba").dialog("close")
                                }

                            });
                        });
                        swal("Reserva registrada!", "Registro guardado satisfactoriamente", "success");

                        Inicio();
                        //setTimeout(() => {
                        //    //  console.log("1 Segundo esperado")
                        //}, 7000);
                      //  window.location.href = sessionStorage.APP + '/Principal';
                    } else {
                        swal("Valida por favor!", "Error al guardar la Reserva", "error");
                    }
                }
                else {
                    $('#divBoton').show();
                    swal("Valida por favor!", "El aforo del piso " + sessionStorage.getItem("PISO") + " está completa", "error");
                }

            },
            failure: function (msg) {
                console.log(msg);
                //  $.unblockUI();
            },
            error: function (xhr, status, error) {
                console.log(error);
                //  $.unblockUI();
            },
            complete: function () {
                $.unblockUI();
                //$("#prueba").dialog("close")
            }

        });
    }
</script>

<script type="text/javascript">
    var textoComplementario = "";
    var mensajeMembresia = "";
    var CodigoLog = 0;
    var TokenGenerado = false;
    var error = 0;
    var listaUsuarios = [];
    var objuser = {};

    function checkRadio(name) {
        formaTransporte = name;
        if (name == "Moto" || name == "Auto") {
            $('#divPlaca').show();
        }
        else {
            $('#divPlaca').hide();
        }
        // alert(formaTransporte);
    }
    function ValidateCorreo(valor) {
        var oBERequest = {};
        oBERequest.Correo = valor;

        $.ajax({
            url: sessionStorage.APP + '/Principal/ValidarCorreoUsuario',
            type: "POST",
            dataType: "json",
            contentType: "application/json; charset=utf-8",
            processData: true,
            data: JSON.stringify(oBERequest),
            success: function (response) {
                console.log(response.data);
                if (response.data == "0") {
                    //    swal("El usuario no se encuentra en la base de trabajadores del bamco, por favor validar", error);
                    swal("Valida por favor!", "El usuario no existe como trabajador", "error");
                    error = 1;
                }
                else {

                    objuser.id = response.data;
                    listaUsuarios.push(response.data);
                    error = 0;
                }

            },
            failure: function (msg) {
                console.log(msg);
                //  $.unblockUI();
            },
            error: function (xhr, status, error) {
                console.log(error);
                //  $.unblockUI();
            },
            complete: function () {
                $.unblockUI();
                //$("#prueba").dialog("close")
            }

        });

    }
    function ValorAsiento(name) {

        IdSitio = name;
        sessionStorage.setItem("AforoSala", "0");
        if (name != "0") {
            var oBERequest = {};
            oBERequest.IdSala = name;

            $.ajax({
                url: sessionStorage.APP + '/Principal/ValidarAforoSala',
                type: "POST",
                dataType: "json",
                contentType: "application/json; charset=utf-8",
                processData: true,
                data: JSON.stringify(oBERequest),
                success: function (response) {
                    if (response.data != "1") {
                        sessionStorage.setItem("AforoSala", response.data);
                        console.log(response.data);

                        var Reserva = '</br>';
                        Reserva += 'HORA INICIAL: <select name="horainicio" id="horainicio" style="height:30px; width:70px" >';
                        Reserva += '<option value="09:00">09:00</option><option value="10:00">10:00</option><option value="11:00">11:00</option><option value="12:00">12:00</option>';
                        Reserva += '<option value="13:00">13:00</option><option value="14:00">14:00</option><option value="15:00">15:00</option><option value="16:00">16:00</option>';
                        Reserva += '<option value="17:00">17:00</option><option value="18:00">18:00</option></select >';
                        Reserva += 'HORA FINAL: <select name="horafinal" id="horafinal" style="height:30px; width:70px" >';
                        Reserva += '<option value="09:00">09:00</option><option value="10:00">10:00</option><option value="11:00">11:00</option><option value="12:00">12:00</option>';
                        Reserva += '<option value="13:00">13:00</option><option value="14:00">14:00</option><option value="15:00">15:00</option><option value="16:00">16:00</option>';
                        Reserva += '<option value="17:00">17:00</option><option value="18:00">18:00</option></select >';
                        Reserva += '</br></br>REGISTRAR CORREOS BANBIF DE PARTICIPANTES</br></br>';
                        for (var i = 1; i < response.data; i++) {


                            Reserva += '<input id="mail' + i + '" type="text" name="mail' + i + '" required autocomplete="off" onchange="ValidateCorreo(this.value);">';

                            Reserva += ' <label>Correo electrónico participante</label> <span id="spanError" style="color: #FF5C5C; font-size: 10px;"></span></br>';
                        }

                        $("#divAforoSala").show();
                        $("#divAforoSala").html(Reserva);
                        //
                        //
                        //
                    }

                },
                failure: function (msg) {
                    console.log(msg);
                    //  $.unblockUI();
                },
                error: function (xhr, status, error) {
                    console.log(error);
                    //  $.unblockUI();
                },
                complete: function () {
                    $.unblockUI();
                    //$("#prueba").dialog("close")
                }

            });
        }
        else {
            $('#divAforoSala').hide();
        }


    }


    function ValidarFormularioCompleto() {
        var count = 0;
        var AnioSeleccionado = document.getElementById("date").value.substr(0, 4);
        var MesSeleccionado = document.getElementById("date").value.substr(5, 2);
        var DiaSeleccionado = document.getElementById("date").value.substr(8, 2);
        var AnioMin = FechaMin.substr(0, 4);
        var MesMin = FechaMin.substr(5, 2);
        var DiaMin = FechaMin.substr(8, 2);
        var AnioMax = FechaMax.substr(0, 4);
        var MesMax = FechaMax.substr(5, 2);
        var DiaMax = FechaMax.substr(8, 2);


        if ((AnioSeleccionado + MesSeleccionado + DiaSeleccionado) < (AnioMin + MesMin + DiaMin)) {
            count = 1;
        }
        if ((AnioSeleccionado + MesSeleccionado + DiaSeleccionado) > (AnioMax + MesMax + DiaMax)) {
            count = count + 1;
        }
        if (count == 2 || count == 1) {
            return false;
        }
        else {
            return true;
        }

    }


    function Guardar() {

    }

    function CerrarSesion() {
        window.location.href = sessionStorage.APP;
    }




</script>